@import "tailwindcss";

:root {
  --background: #ffffff;
  --foreground: #171717;
}

@theme inline {
  --color-background: var(--background);
  --color-foreground: var(--foreground);
  --font-sans: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  --font-mono: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, monospace;
}

@media (prefers-color-scheme: dark) {
  :root {
    --background: #0a0a0a;
    --foreground: #ededed;
  }
}

body {
  background: #f8fafc; /* bg-slate-50 */
  color: var(--foreground);
  /* Use the Geist font loaded via next/font with sensible fallbacks */
  font-family: var(--font-sans), Arial, Helvetica, sans-serif;
}

code, pre {
  font-family: var(--font-mono), ui-monospace, monospace;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Custom utility classes */
@layer components {
  .card {
    @apply rounded-xl border bg-white shadow-sm p-4;
  }

  .toolbar {
    @apply flex items-center gap-2;
  }

  /* Inspector (Right Sidebar) layout styles */
  .inspector-sm .gjs-sm-sectors {
    background: #fff !important;
  }
  .inspector-sm .gjs-sm-sector-title{
    @apply border-b border-gray-200 bg-white text-gray-800;
    font-weight: 500 !important;
    padding: 10px 12px !important;
  }
  .inspector-sm .gjs-sm-properties{
    padding: 10px 8px !important;
  }
  .inspector-sm .gjs-field,
  .inspector-sm .gjs-clm-select,
  .inspector-sm .gjs-clm-field{
    @apply bg-white border border-gray-200 rounded;
  }
  .inspector-sm .gjs-field input,
  .inspector-sm .gjs-field select,
  .inspector-sm .gjs-field textarea{
    @apply text-gray-800;
  }
  .inspector-sm .gjs-sm-layer,
  .inspector-sm .gjs-sm-preview-file{
    @apply border border-gray-200;
  }
  .inspector-sm .gjs-btn-prim{
    @apply bg-gray-100;
  }
}

/* Prevent drag-and-drop blocking CSS resets */
@layer base {
  * {
    -webkit-user-select: auto;
    -moz-user-select: auto;
    user-select: auto;
    touch-action: auto;
    pointer-events: auto;
  }

  html,
  body {
    height: 100%;
    margin: 0;
    padding: 0;
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
  }

  input,
  textarea,
  [contenteditable="true"] {
    -webkit-user-select: text;
    -moz-user-select: text;
    user-select: text;
  }
}

/* GrapesJS specific fixes */
@layer components {
  .gjs-editor {
    height: 100vh !important;
    width: 100% !important;
    position: relative !important;
    overflow: visible !important;
  }

  .gjs-cv-canvas {
    background: #f8f9fa !important;
    position: relative !important;
    overflow: auto !important;
    pointer-events: auto !important;
  }

  .gjs-block {
    cursor: grab !important;
    pointer-events: auto !important;
    -webkit-user-select: none !important;
    -moz-user-select: none !important;
    user-select: none !important;
    touch-action: manipulation !important;
  }

  .gjs-block:active {
    cursor: grabbing !important;
  }

  .gjs-dashed {
    outline: 2px dashed #4299e1 !important;
    outline-offset: -2px !important;
    pointer-events: none !important;
  }

  .gjs-pn-panels {
    z-index: 10 !important;
    pointer-events: auto !important;
  }

  .gjs-blocks-c {
    overflow-y: auto !important;
    max-height: calc(100vh - 100px) !important;
  }

  .gjs-selected {
    outline: 2px solid #4299e1 !important;
    outline-offset: -2px !important;
  }

  .gjs-selected-parent {
    outline: 1px solid #4299e1 !important;
    outline-offset: -1px !important;
    opacity: 0.7 !important;
  }

  .gjs-toolbar,
  .gjs-toolbar-item {
    pointer-events: auto !important;
    z-index: 1000 !important;
  }

  .gjs-comp-selected {
    pointer-events: auto !important;
  }

  .gjs-drag-helper {
    pointer-events: none !important;
    z-index: 9999 !important;
  }
}

/* Utilities for drag-and-drop */
@layer utilities {
  .drag-enabled {
    -webkit-user-select: none;
    -moz-user-select: none;
    user-select: none;
    touch-action: manipulation;
    cursor: grab;
  }

  .drag-enabled:active {
    cursor: grabbing;
  }

  .no-pointer-events {
    pointer-events: none;
  }

  .auto-pointer-events {
    pointer-events: auto;
  }

  .full-height {
    height: 100vh;
    min-height: 100vh;
  }
}
